"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/webhooks/composio/route";
exports.ids = ["app/api/webhooks/composio/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fcomposio%2Froute&page=%2Fapi%2Fwebhooks%2Fcomposio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fcomposio%2Froute.ts&appDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fcomposio%2Froute&page=%2Fapi%2Fwebhooks%2Fcomposio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fcomposio%2Froute.ts&appDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_darrenz_Documents_MiscProjects_AI_Agent_Test_app_api_webhooks_composio_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/webhooks/composio/route.ts */ \"(rsc)/./app/api/webhooks/composio/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/webhooks/composio/route\",\n        pathname: \"/api/webhooks/composio\",\n        filename: \"route\",\n        bundlePath: \"app/api/webhooks/composio/route\"\n    },\n    resolvedPagePath: \"/Users/darrenz/Documents/MiscProjects/AI Agent Test/app/api/webhooks/composio/route.ts\",\n    nextConfigOutput,\n    userland: _Users_darrenz_Documents_MiscProjects_AI_Agent_Test_app_api_webhooks_composio_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/webhooks/composio/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJob29rcyUyRmNvbXBvc2lvJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ3ZWJob29rcyUyRmNvbXBvc2lvJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGd2ViaG9va3MlMkZjb21wb3NpbyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRhcnJlbnolMkZEb2N1bWVudHMlMkZNaXNjUHJvamVjdHMlMkZBSSUyMEFnZW50JTIwVGVzdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZkYXJyZW56JTJGRG9jdW1lbnRzJTJGTWlzY1Byb2plY3RzJTJGQUklMjBBZ2VudCUyMFRlc3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3JiaXRhbC1haS1hZ2VudC8/YmE0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZGFycmVuei9Eb2N1bWVudHMvTWlzY1Byb2plY3RzL0FJIEFnZW50IFRlc3QvYXBwL2FwaS93ZWJob29rcy9jb21wb3Npby9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvd2ViaG9va3MvY29tcG9zaW8vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93ZWJob29rcy9jb21wb3Npb1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2ViaG9va3MvY29tcG9zaW8vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvZGFycmVuei9Eb2N1bWVudHMvTWlzY1Byb2plY3RzL0FJIEFnZW50IFRlc3QvYXBwL2FwaS93ZWJob29rcy9jb21wb3Npby9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2ViaG9va3MvY29tcG9zaW8vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fcomposio%2Froute&page=%2Fapi%2Fwebhooks%2Fcomposio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fcomposio%2Froute.ts&appDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/webhooks/composio/route.ts":
/*!********************************************!*\
  !*** ./app/api/webhooks/composio/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _app_lib_kv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/lib/kv */ \"(rsc)/./app/lib/kv.ts\");\n/* harmony import */ var _app_lib_taskInference__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/app/lib/taskInference */ \"(rsc)/./app/lib/taskInference.ts\");\n\n\n\n\nconst runtime = \"nodejs\";\nconst maxDuration = 30;\n// Verify webhook signature from Composio\nfunction verifyWebhookSignature(body, signature, secret) {\n    if (!signature || !secret) {\n        // In development, allow unsigned webhooks if no secret is configured\n        if ( true && !secret) {\n            console.warn(\"[Webhook] No secret configured, skipping signature verification\");\n            return true;\n        }\n        return false;\n    }\n    const expectedSignature = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac(\"sha256\", secret).update(body).digest(\"hex\");\n    return crypto__WEBPACK_IMPORTED_MODULE_1___default().timingSafeEqual(Buffer.from(signature), Buffer.from(expectedSignature));\n}\n// Pre-filter: Should we process this message?\nfunction shouldProcess(payload) {\n    if (payload.app_name === \"SLACK\") {\n        const slackPayload = payload.payload;\n        const { channel_type, text } = slackPayload;\n        // Only process: DMs, or messages that @mention the bot\n        const isDM = channel_type === \"im\";\n        const isMention = text?.toLowerCase().includes(\"@orbital\") || text?.includes(\"<@\"); // Slack user mentions\n        if (!isDM && !isMention) {\n            return {\n                process: false,\n                reason: \"Channel message without @mention\"\n            };\n        }\n        // Skip bot messages and system messages\n        if (!text || text.trim().length === 0) {\n            return {\n                process: false,\n                reason: \"Empty message\"\n            };\n        }\n        return {\n            process: true\n        };\n    }\n    if (payload.app_name === \"GMAIL\") {\n        const gmailPayload = payload.payload;\n        // Skip automated/newsletter emails based on common patterns\n        // Handle both Composio field names (sender, label_ids) and legacy names (from, labelIds)\n        const from = (gmailPayload.sender || gmailPayload.from || \"\").toLowerCase();\n        const subject = (gmailPayload.subject || \"\").toLowerCase();\n        const labelIds = gmailPayload.label_ids || gmailPayload.labelIds || [];\n        const isAutomated = from.includes(\"noreply\") || from.includes(\"no-reply\") || from.includes(\"notifications\") || from.includes(\"mailer-daemon\") || subject.includes(\"unsubscribe\") || labelIds.includes(\"CATEGORY_PROMOTIONS\") || labelIds.includes(\"CATEGORY_SOCIAL\");\n        if (isAutomated) {\n            return {\n                process: false,\n                reason: \"Automated/newsletter email\"\n            };\n        }\n        return {\n            process: true\n        };\n    }\n    return {\n        process: false,\n        reason: \"Unknown app\"\n    };\n}\n// Transform webhook payload to MessageContext\nfunction toMessageContext(payload) {\n    if (payload.app_name === \"SLACK\") {\n        const slack = payload.payload;\n        return {\n            source: \"slack\",\n            content: slack.text,\n            sender: slack.user,\n            timestamp: new Date(parseFloat(slack.ts) * 1000).toISOString(),\n            channel: slack.channel,\n            channelType: slack.channel_type,\n            threadId: slack.thread_ts\n        };\n    }\n    // Gmail - handle Composio's actual payload structure\n    const gmail = payload.payload;\n    // Composio uses: message_text, sender, message_timestamp, message_id, thread_id, preview\n    const content = gmail.message_text || gmail.preview?.body || gmail.body || gmail.snippet || \"\";\n    const sender = gmail.sender || gmail.from || \"\";\n    const timestamp = gmail.message_timestamp || gmail.date || new Date().toISOString();\n    const messageId = gmail.message_id || gmail.messageId || \"\";\n    return {\n        source: \"gmail\",\n        content,\n        sender,\n        timestamp,\n        subject: gmail.subject,\n        messageId,\n        isReply: gmail.subject?.toLowerCase().startsWith(\"re:\")\n    };\n}\nasync function POST(req) {\n    console.log(\"[Webhook] Received request\");\n    try {\n        const bodyText = await req.text();\n        const signature = req.headers.get(\"x-composio-signature\");\n        const webhookSecret = process.env.COMPOSIO_WEBHOOK_SECRET || \"\";\n        // Verify signature\n        if (!verifyWebhookSignature(bodyText, signature, webhookSecret)) {\n            console.error(\"[Webhook] Invalid signature\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid signature\"\n            }, {\n                status: 401\n            });\n        }\n        const rawBody = JSON.parse(bodyText);\n        // Log raw payload for debugging\n        console.log(\"[Webhook] Raw payload:\", JSON.stringify(rawBody, null, 2));\n        // Composio webhook format:\n        // { type: \"slack_receive_message\", timestamp, log_id, data: { user_id, connection_id, channel, text, ... } }\n        const triggerType = rawBody.type || \"\";\n        const data = rawBody.data || {};\n        // Extract app name from trigger type (e.g., \"slack_receive_message\" -> \"SLACK\")\n        const appName = triggerType.split(\"_\")[0]?.toUpperCase();\n        // Build normalized payload\n        const body = {\n            entity_id: data.user_id || rawBody.entity_id || rawBody.entityId,\n            connection_id: data.connection_id || rawBody.connection_id,\n            app_name: appName,\n            trigger_name: triggerType,\n            payload: data\n        };\n        const entityId = body.entity_id;\n        console.log(\"[Webhook] Processing:\", {\n            entityId,\n            app: body.app_name,\n            trigger: body.trigger_name\n        });\n        if (!entityId) {\n            console.error(\"[Webhook] Missing entity_id - could not extract from payload\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing entity_id\"\n            }, {\n                status: 400\n            });\n        }\n        // Pre-filter check\n        const filterResult = shouldProcess(body);\n        if (!filterResult.process) {\n            console.log(`[Webhook] Skipped: ${filterResult.reason}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                processed: false,\n                reason: filterResult.reason\n            });\n        }\n        // Rate limiting\n        const rateLimit = await (0,_app_lib_kv__WEBPACK_IMPORTED_MODULE_2__.checkRateLimit)(entityId, 10, 60);\n        if (!rateLimit.allowed) {\n            console.warn(`[Webhook] Rate limited for entity: ${entityId}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Rate limited\",\n                remaining: rateLimit.remaining\n            }, {\n                status: 429\n            });\n        }\n        // Deduplication check\n        const context = toMessageContext(body);\n        const messageHash = (0,_app_lib_kv__WEBPACK_IMPORTED_MODULE_2__.createMessageHash)(context.source, context.sender, context.content);\n        if (await (0,_app_lib_kv__WEBPACK_IMPORTED_MODULE_2__.hasSeenMessage)(messageHash)) {\n            console.log(\"[Webhook] Duplicate message, skipping\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                processed: false,\n                reason: \"Duplicate\"\n            });\n        }\n        // Mark as seen before processing (to prevent race conditions)\n        await (0,_app_lib_kv__WEBPACK_IMPORTED_MODULE_2__.markMessageSeen)(messageHash);\n        // Run AI inference\n        console.log(\"[Webhook] Running task inference...\");\n        const proposal = await (0,_app_lib_taskInference__WEBPACK_IMPORTED_MODULE_3__.inferTaskFromMessage)(context);\n        if (proposal) {\n            console.log(\"[Webhook] Task detected, saving proposal:\", {\n                title: proposal.title,\n                confidence: proposal.confidence\n            });\n            await (0,_app_lib_kv__WEBPACK_IMPORTED_MODULE_2__.addProposal)(entityId, proposal);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                processed: true,\n                proposalId: proposal.proposalId,\n                title: proposal.title,\n                confidence: proposal.confidence\n            });\n        }\n        console.log(\"[Webhook] No task detected\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            processed: true,\n            taskDetected: false\n        });\n    } catch (error) {\n        console.error(\"[Webhook] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Health check endpoint\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        status: \"ok\",\n        timestamp: new Date().toISOString()\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3dlYmhvb2tzL2NvbXBvc2lvL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3RDtBQUM1QjtBQU9OO0FBQzhEO0FBTzdFLE1BQU1RLFVBQVUsU0FBUztBQUN6QixNQUFNQyxjQUFjLEdBQUc7QUFFOUIseUNBQXlDO0FBQ3pDLFNBQVNDLHVCQUNQQyxJQUFZLEVBQ1pDLFNBQXdCLEVBQ3hCQyxNQUFjO0lBRWQsSUFBSSxDQUFDRCxhQUFhLENBQUNDLFFBQVE7UUFDekIscUVBQXFFO1FBQ3JFLElBQUlDLEtBQXNDLElBQUksQ0FBQ0QsUUFBUTtZQUNyREUsUUFBUUMsSUFBSSxDQUFDO1lBQ2IsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0lBRUEsTUFBTUMsb0JBQW9CaEIsd0RBQ2IsQ0FBQyxVQUFVWSxRQUNyQk0sTUFBTSxDQUFDUixNQUNQUyxNQUFNLENBQUM7SUFFVixPQUFPbkIsNkRBQXNCLENBQzNCcUIsT0FBT0MsSUFBSSxDQUFDWCxZQUNaVSxPQUFPQyxJQUFJLENBQUNOO0FBRWhCO0FBRUEsOENBQThDO0FBQzlDLFNBQVNPLGNBQWNDLE9BQStCO0lBSXBELElBQUlBLFFBQVFDLFFBQVEsS0FBSyxTQUFTO1FBQ2hDLE1BQU1DLGVBQWVGLFFBQVFBLE9BQU87UUFDcEMsTUFBTSxFQUFFRyxZQUFZLEVBQUVDLElBQUksRUFBRSxHQUFHRjtRQUUvQix1REFBdUQ7UUFDdkQsTUFBTUcsT0FBT0YsaUJBQWlCO1FBQzlCLE1BQU1HLFlBQ0pGLE1BQU1HLGNBQWNDLFNBQVMsZUFDN0JKLE1BQU1JLFNBQVMsT0FBTyxzQkFBc0I7UUFFOUMsSUFBSSxDQUFDSCxRQUFRLENBQUNDLFdBQVc7WUFDdkIsT0FBTztnQkFDTGpCLFNBQVM7Z0JBQ1RvQixRQUFRO1lBQ1Y7UUFDRjtRQUVBLHdDQUF3QztRQUN4QyxJQUFJLENBQUNMLFFBQVFBLEtBQUtNLElBQUksR0FBR0MsTUFBTSxLQUFLLEdBQUc7WUFDckMsT0FBTztnQkFB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LFNBQVNFLFVBQVU7WUFDakM7UUFDRjtRQUVBMUYsUUFBUXNELEdBQUcsQ0FBQztRQUNaLE9BQU9yRSxxREFBWUEsQ0FBQzZFLElBQUksQ0FBQztZQUN2Qm9CLFdBQVc7WUFDWFUsY0FBYztRQUNoQjtJQUNGLEVBQUUsT0FBTy9CLE9BQU87UUFDZDdELFFBQVE2RCxLQUFLLENBQUMsb0JBQW9CQTtRQUNsQyxPQUFPNUUscURBQVlBLENBQUM2RSxJQUFJLENBQ3RCO1lBQUVELE9BQU87UUFBd0IsR0FDakM7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsZUFBZThCO0lBQ3BCLE9BQU81RyxxREFBWUEsQ0FBQzZFLElBQUksQ0FBQztRQUN2QkMsUUFBUTtRQUNSOUIsV0FBVyxJQUFJQyxPQUFPRyxXQUFXO0lBQ25DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmJpdGFsLWFpLWFnZW50Ly4vYXBwL2FwaS93ZWJob29rcy9jb21wb3Npby9yb3V0ZS50cz9mYTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHtcbiAgYWRkUHJvcG9zYWwsXG4gIGhhc1NlZW5NZXNzYWdlLFxuICBtYXJrTWVzc2FnZVNlZW4sXG4gIGNyZWF0ZU1lc3NhZ2VIYXNoLFxuICBjaGVja1JhdGVMaW1pdCxcbn0gZnJvbSBcIkAvYXBwL2xpYi9rdlwiO1xuaW1wb3J0IHsgaW5mZXJUYXNrRnJvbU1lc3NhZ2UsIHR5cGUgTWVzc2FnZUNvbnRleHQgfSBmcm9tIFwiQC9hcHAvbGliL3Rhc2tJbmZlcmVuY2VcIjtcbmltcG9ydCB0eXBlIHtcbiAgQ29tcG9zaW9XZWJob29rUGF5bG9hZCxcbiAgU2xhY2tFdmVudFBheWxvYWQsXG4gIEdtYWlsRXZlbnRQYXlsb2FkLFxufSBmcm9tIFwiQC9hcHAvbGliL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcbmV4cG9ydCBjb25zdCBtYXhEdXJhdGlvbiA9IDMwO1xuXG4vLyBWZXJpZnkgd2ViaG9vayBzaWduYXR1cmUgZnJvbSBDb21wb3Npb1xuZnVuY3Rpb24gdmVyaWZ5V2ViaG9va1NpZ25hdHVyZShcbiAgYm9keTogc3RyaW5nLFxuICBzaWduYXR1cmU6IHN0cmluZyB8IG51bGwsXG4gIHNlY3JldDogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgaWYgKCFzaWduYXR1cmUgfHwgIXNlY3JldCkge1xuICAgIC8vIEluIGRldmVsb3BtZW50LCBhbGxvdyB1bnNpZ25lZCB3ZWJob29rcyBpZiBubyBzZWNyZXQgaXMgY29uZmlndXJlZFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiICYmICFzZWNyZXQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIltXZWJob29rXSBObyBzZWNyZXQgY29uZmlndXJlZCwgc2tpcHBpbmcgc2lnbmF0dXJlIHZlcmlmaWNhdGlvblwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBleHBlY3RlZFNpZ25hdHVyZSA9IGNyeXB0b1xuICAgIC5jcmVhdGVIbWFjKFwic2hhMjU2XCIsIHNlY3JldClcbiAgICAudXBkYXRlKGJvZHkpXG4gICAgLmRpZ2VzdChcImhleFwiKTtcblxuICByZXR1cm4gY3J5cHRvLnRpbWluZ1NhZmVFcXVhbChcbiAgICBCdWZmZXIuZnJvbShzaWduYXR1cmUpLFxuICAgIEJ1ZmZlci5mcm9tKGV4cGVjdGVkU2lnbmF0dXJlKVxuICApO1xufVxuXG4vLyBQcmUtZmlsdGVyOiBTaG91bGQgd2UgcHJvY2VzcyB0aGlzIG1lc3NhZ2U/XG5mdW5jdGlvbiBzaG91bGRQcm9jZXNzKHBheWxvYWQ6IENvbXBvc2lvV2ViaG9va1BheWxvYWQpOiB7XG4gIHByb2Nlc3M6IGJvb2xlYW47XG4gIHJlYXNvbj86IHN0cmluZztcbn0ge1xuICBpZiAocGF5bG9hZC5hcHBfbmFtZSA9PT0gXCJTTEFDS1wiKSB7XG4gICAgY29uc3Qgc2xhY2tQYXlsb2FkID0gcGF5bG9hZC5wYXlsb2FkIGFzIFNsYWNrRXZlbnRQYXlsb2FkO1xuICAgIGNvbnN0IHsgY2hhbm5lbF90eXBlLCB0ZXh0IH0gPSBzbGFja1BheWxvYWQ7XG5cbiAgICAvLyBPbmx5IHByb2Nlc3M6IERNcywgb3IgbWVzc2FnZXMgdGhhdCBAbWVudGlvbiB0aGUgYm90XG4gICAgY29uc3QgaXNETSA9IGNoYW5uZWxfdHlwZSA9PT0gXCJpbVwiO1xuICAgIGNvbnN0IGlzTWVudGlvbiA9XG4gICAgICB0ZXh0Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiQG9yYml0YWxcIikgfHxcbiAgICAgIHRleHQ/LmluY2x1ZGVzKFwiPEBcIik7IC8vIFNsYWNrIHVzZXIgbWVudGlvbnNcblxuICAgIGlmICghaXNETSAmJiAhaXNNZW50aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm9jZXNzOiBmYWxzZSxcbiAgICAgICAgcmVhc29uOiBcIkNoYW5uZWwgbWVzc2FnZSB3aXRob3V0IEBtZW50aW9uXCIsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFNraXAgYm90IG1lc3NhZ2VzIGFuZCBzeXN0ZW0gbWVzc2FnZXNcbiAgICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBwcm9jZXNzOiBmYWxzZSwgcmVhc29uOiBcIkVtcHR5IG1lc3NhZ2VcIiB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHByb2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIGlmIChwYXlsb2FkLmFwcF9uYW1lID09PSBcIkdNQUlMXCIpIHtcbiAgICBjb25zdCBnbWFpbFBheWxvYWQgPSBwYXlsb2FkLnBheWxvYWQgYXMgR21haWxFdmVudFBheWxvYWQ7XG5cbiAgICAvLyBTa2lwIGF1dG9tYXRlZC9uZXdzbGV0dGVyIGVtYWlscyBiYXNlZCBvbiBjb21tb24gcGF0dGVybnNcbiAgICAvLyBIYW5kbGUgYm90aCBDb21wb3NpbyBmaWVsZCBuYW1lcyAoc2VuZGVyLCBsYWJlbF9pZHMpIGFuZCBsZWdhY3kgbmFtZXMgKGZyb20sIGxhYmVsSWRzKVxuICAgIGNvbnN0IGZyb20gPSAoZ21haWxQYXlsb2FkLnNlbmRlciB8fCBnbWFpbFBheWxvYWQuZnJvbSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHN1YmplY3QgPSAoZ21haWxQYXlsb2FkLnN1YmplY3QgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBsYWJlbElkcyA9IGdtYWlsUGF5bG9hZC5sYWJlbF9pZHMgfHwgZ21haWxQYXlsb2FkLmxhYmVsSWRzIHx8IFtdO1xuXG4gICAgY29uc3QgaXNBdXRvbWF0ZWQgPVxuICAgICAgZnJvbS5pbmNsdWRlcyhcIm5vcmVwbHlcIikgfHxcbiAgICAgIGZyb20uaW5jbHVkZXMoXCJuby1yZXBseVwiKSB8fFxuICAgICAgZnJvbS5pbmNsdWRlcyhcIm5vdGlmaWNhdGlvbnNcIikgfHxcbiAgICAgIGZyb20uaW5jbHVkZXMoXCJtYWlsZXItZGFlbW9uXCIpIHx8XG4gICAgICBzdWJqZWN0LmluY2x1ZGVzKFwidW5zdWJzY3JpYmVcIikgfHxcbiAgICAgIGxhYmVsSWRzLmluY2x1ZGVzKFwiQ0FURUdPUllfUFJPTU9USU9OU1wiKSB8fFxuICAgICAgbGFiZWxJZHMuaW5jbHVkZXMoXCJDQVRFR09SWV9TT0NJQUxcIik7XG5cbiAgICBpZiAoaXNBdXRvbWF0ZWQpIHtcbiAgICAgIHJldHVybiB7IHByb2Nlc3M6IGZhbHNlLCByZWFzb246IFwiQXV0b21hdGVkL25ld3NsZXR0ZXIgZW1haWxcIiB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHByb2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIHJldHVybiB7IHByb2Nlc3M6IGZhbHNlLCByZWFzb246IFwiVW5rbm93biBhcHBcIiB9O1xufVxuXG4vLyBUcmFuc2Zvcm0gd2ViaG9vayBwYXlsb2FkIHRvIE1lc3NhZ2VDb250ZXh0XG5mdW5jdGlvbiB0b01lc3NhZ2VDb250ZXh0KHBheWxvYWQ6IENvbXBvc2lvV2ViaG9va1BheWxvYWQpOiBNZXNzYWdlQ29udGV4dCB7XG4gIGlmIChwYXlsb2FkLmFwcF9uYW1lID09PSBcIlNMQUNLXCIpIHtcbiAgICBjb25zdCBzbGFjayA9IHBheWxvYWQucGF5bG9hZCBhcyBTbGFja0V2ZW50UGF5bG9hZDtcbiAgICByZXR1cm4ge1xuICAgICAgc291cmNlOiBcInNsYWNrXCIsXG4gICAgICBjb250ZW50OiBzbGFjay50ZXh0LFxuICAgICAgc2VuZGVyOiBzbGFjay51c2VyLCAvLyBUaGlzIGlzIHRoZSB1c2VyIElELCBpZGVhbGx5IHJlc29sdmUgdG8gbmFtZVxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShwYXJzZUZsb2F0KHNsYWNrLnRzKSAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBjaGFubmVsOiBzbGFjay5jaGFubmVsLFxuICAgICAgY2hhbm5lbFR5cGU6IHNsYWNrLmNoYW5uZWxfdHlwZSxcbiAgICAgIHRocmVhZElkOiBzbGFjay50aHJlYWRfdHMsXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdtYWlsIC0gaGFuZGxlIENvbXBvc2lvJ3MgYWN0dWFsIHBheWxvYWQgc3RydWN0dXJlXG4gIGNvbnN0IGdtYWlsID0gcGF5bG9hZC5wYXlsb2FkIGFzIEdtYWlsRXZlbnRQYXlsb2FkO1xuICAvLyBDb21wb3NpbyB1c2VzOiBtZXNzYWdlX3RleHQsIHNlbmRlciwgbWVzc2FnZV90aW1lc3RhbXAsIG1lc3NhZ2VfaWQsIHRocmVhZF9pZCwgcHJldmlld1xuICBjb25zdCBjb250ZW50ID0gZ21haWwubWVzc2FnZV90ZXh0IHx8IGdtYWlsLnByZXZpZXc/LmJvZHkgfHwgZ21haWwuYm9keSB8fCBnbWFpbC5zbmlwcGV0IHx8IFwiXCI7XG4gIGNvbnN0IHNlbmRlciA9IGdtYWlsLnNlbmRlciB8fCBnbWFpbC5mcm9tIHx8IFwiXCI7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IGdtYWlsLm1lc3NhZ2VfdGltZXN0YW1wIHx8IGdtYWlsLmRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCBtZXNzYWdlSWQgPSBnbWFpbC5tZXNzYWdlX2lkIHx8IGdtYWlsLm1lc3NhZ2VJZCB8fCBcIlwiO1xuICBcbiAgcmV0dXJuIHtcbiAgICBzb3VyY2U6IFwiZ21haWxcIixcbiAgICBjb250ZW50LFxuICAgIHNlbmRlcixcbiAgICB0aW1lc3RhbXAsXG4gICAgc3ViamVjdDogZ21haWwuc3ViamVjdCxcbiAgICBtZXNzYWdlSWQsXG4gICAgaXNSZXBseTogZ21haWwuc3ViamVjdD8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKFwicmU6XCIpLFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnNvbGUubG9nKFwiW1dlYmhvb2tdIFJlY2VpdmVkIHJlcXVlc3RcIik7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5VGV4dCA9IGF3YWl0IHJlcS50ZXh0KCk7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gcmVxLmhlYWRlcnMuZ2V0KFwieC1jb21wb3Npby1zaWduYXR1cmVcIik7XG4gICAgY29uc3Qgd2ViaG9va1NlY3JldCA9IHByb2Nlc3MuZW52LkNPTVBPU0lPX1dFQkhPT0tfU0VDUkVUIHx8IFwiXCI7XG5cbiAgICAvLyBWZXJpZnkgc2lnbmF0dXJlXG4gICAgaWYgKCF2ZXJpZnlXZWJob29rU2lnbmF0dXJlKGJvZHlUZXh0LCBzaWduYXR1cmUsIHdlYmhvb2tTZWNyZXQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1dlYmhvb2tdIEludmFsaWQgc2lnbmF0dXJlXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBzaWduYXR1cmVcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJhd0JvZHkgPSBKU09OLnBhcnNlKGJvZHlUZXh0KTtcbiAgICBcbiAgICAvLyBMb2cgcmF3IHBheWxvYWQgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKFwiW1dlYmhvb2tdIFJhdyBwYXlsb2FkOlwiLCBKU09OLnN0cmluZ2lmeShyYXdCb2R5LCBudWxsLCAyKSk7XG5cbiAgICAvLyBDb21wb3NpbyB3ZWJob29rIGZvcm1hdDpcbiAgICAvLyB7IHR5cGU6IFwic2xhY2tfcmVjZWl2ZV9tZXNzYWdlXCIsIHRpbWVzdGFtcCwgbG9nX2lkLCBkYXRhOiB7IHVzZXJfaWQsIGNvbm5lY3Rpb25faWQsIGNoYW5uZWwsIHRleHQsIC4uLiB9IH1cbiAgICBjb25zdCB0cmlnZ2VyVHlwZSA9IHJhd0JvZHkudHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhdGEgPSByYXdCb2R5LmRhdGEgfHwge307XG4gICAgXG4gICAgLy8gRXh0cmFjdCBhcHAgbmFtZSBmcm9tIHRyaWdnZXIgdHlwZSAoZS5nLiwgXCJzbGFja19yZWNlaXZlX21lc3NhZ2VcIiAtPiBcIlNMQUNLXCIpXG4gICAgY29uc3QgYXBwTmFtZSA9IHRyaWdnZXJUeXBlLnNwbGl0KFwiX1wiKVswXT8udG9VcHBlckNhc2UoKSBhcyBcIlNMQUNLXCIgfCBcIkdNQUlMXCI7XG4gICAgXG4gICAgLy8gQnVpbGQgbm9ybWFsaXplZCBwYXlsb2FkXG4gICAgY29uc3QgYm9keTogQ29tcG9zaW9XZWJob29rUGF5bG9hZCA9IHtcbiAgICAgIGVudGl0eV9pZDogZGF0YS51c2VyX2lkIHx8IHJhd0JvZHkuZW50aXR5X2lkIHx8IHJhd0JvZHkuZW50aXR5SWQsXG4gICAgICBjb25uZWN0aW9uX2lkOiBkYXRhLmNvbm5lY3Rpb25faWQgfHwgcmF3Qm9keS5jb25uZWN0aW9uX2lkLFxuICAgICAgYXBwX25hbWU6IGFwcE5hbWUsXG4gICAgICB0cmlnZ2VyX25hbWU6IHRyaWdnZXJUeXBlLFxuICAgICAgcGF5bG9hZDogZGF0YSwgLy8gVGhlIGFjdHVhbCBtZXNzYWdlIGRhdGEgaXMgaW5zaWRlIGBkYXRhYFxuICAgIH07XG4gICAgXG4gICAgY29uc3QgZW50aXR5SWQgPSBib2R5LmVudGl0eV9pZDtcblxuICAgIGNvbnNvbGUubG9nKFwiW1dlYmhvb2tdIFByb2Nlc3Npbmc6XCIsIHtcbiAgICAgIGVudGl0eUlkLFxuICAgICAgYXBwOiBib2R5LmFwcF9uYW1lLFxuICAgICAgdHJpZ2dlcjogYm9keS50cmlnZ2VyX25hbWUsXG4gICAgfSk7XG5cbiAgICBpZiAoIWVudGl0eUlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1dlYmhvb2tdIE1pc3NpbmcgZW50aXR5X2lkIC0gY291bGQgbm90IGV4dHJhY3QgZnJvbSBwYXlsb2FkXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiTWlzc2luZyBlbnRpdHlfaWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIFByZS1maWx0ZXIgY2hlY2tcbiAgICBjb25zdCBmaWx0ZXJSZXN1bHQgPSBzaG91bGRQcm9jZXNzKGJvZHkpO1xuICAgIGlmICghZmlsdGVyUmVzdWx0LnByb2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbV2ViaG9va10gU2tpcHBlZDogJHtmaWx0ZXJSZXN1bHQucmVhc29ufWApO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgcHJvY2Vzc2VkOiBmYWxzZSxcbiAgICAgICAgcmVhc29uOiBmaWx0ZXJSZXN1bHQucmVhc29uLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmF0ZSBsaW1pdGluZ1xuICAgIGNvbnN0IHJhdGVMaW1pdCA9IGF3YWl0IGNoZWNrUmF0ZUxpbWl0KGVudGl0eUlkLCAxMCwgNjApO1xuICAgIGlmICghcmF0ZUxpbWl0LmFsbG93ZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgW1dlYmhvb2tdIFJhdGUgbGltaXRlZCBmb3IgZW50aXR5OiAke2VudGl0eUlkfWApO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIlJhdGUgbGltaXRlZFwiLCByZW1haW5pbmc6IHJhdGVMaW1pdC5yZW1haW5pbmcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQyOSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERlZHVwbGljYXRpb24gY2hlY2tcbiAgICBjb25zdCBjb250ZXh0ID0gdG9NZXNzYWdlQ29udGV4dChib2R5KTtcbiAgICBjb25zdCBtZXNzYWdlSGFzaCA9IGNyZWF0ZU1lc3NhZ2VIYXNoKFxuICAgICAgY29udGV4dC5zb3VyY2UsXG4gICAgICBjb250ZXh0LnNlbmRlcixcbiAgICAgIGNvbnRleHQuY29udGVudFxuICAgICk7XG5cbiAgICBpZiAoYXdhaXQgaGFzU2Vlbk1lc3NhZ2UobWVzc2FnZUhhc2gpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltXZWJob29rXSBEdXBsaWNhdGUgbWVzc2FnZSwgc2tpcHBpbmdcIik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBwcm9jZXNzZWQ6IGZhbHNlLCByZWFzb246IFwiRHVwbGljYXRlXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFyayBhcyBzZWVuIGJlZm9yZSBwcm9jZXNzaW5nICh0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucylcbiAgICBhd2FpdCBtYXJrTWVzc2FnZVNlZW4obWVzc2FnZUhhc2gpO1xuXG4gICAgLy8gUnVuIEFJIGluZmVyZW5jZVxuICAgIGNvbnNvbGUubG9nKFwiW1dlYmhvb2tdIFJ1bm5pbmcgdGFzayBpbmZlcmVuY2UuLi5cIik7XG4gICAgY29uc3QgcHJvcG9zYWwgPSBhd2FpdCBpbmZlclRhc2tGcm9tTWVzc2FnZShjb250ZXh0KTtcblxuICAgIGlmIChwcm9wb3NhbCkge1xuICAgICAgY29uc29sZS5sb2coXCJbV2ViaG9va10gVGFzayBkZXRlY3RlZCwgc2F2aW5nIHByb3Bvc2FsOlwiLCB7XG4gICAgICAgIHRpdGxlOiBwcm9wb3NhbC50aXRsZSxcbiAgICAgICAgY29uZmlkZW5jZTogcHJvcG9zYWwuY29uZmlkZW5jZSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhZGRQcm9wb3NhbChlbnRpdHlJZCwgcHJvcG9zYWwpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBwcm9jZXNzZWQ6IHRydWUsXG4gICAgICAgIHByb3Bvc2FsSWQ6IHByb3Bvc2FsLnByb3Bvc2FsSWQsXG4gICAgICAgIHRpdGxlOiBwcm9wb3NhbC50aXRsZSxcbiAgICAgICAgY29uZmlkZW5jZTogcHJvcG9zYWwuY29uZmlkZW5jZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiW1dlYmhvb2tdIE5vIHRhc2sgZGV0ZWN0ZWRcIik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHByb2Nlc3NlZDogdHJ1ZSxcbiAgICAgIHRhc2tEZXRlY3RlZDogZmFsc2UsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltXZWJob29rXSBFcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gSGVhbHRoIGNoZWNrIGVuZHBvaW50XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIHN0YXR1czogXCJva1wiLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcnlwdG8iLCJhZGRQcm9wb3NhbCIsImhhc1NlZW5NZXNzYWdlIiwibWFya01lc3NhZ2VTZWVuIiwiY3JlYXRlTWVzc2FnZUhhc2giLCJjaGVja1JhdGVMaW1pdCIsImluZmVyVGFza0Zyb21NZXNzYWdlIiwicnVudGltZSIsIm1heER1cmF0aW9uIiwidmVyaWZ5V2ViaG9va1NpZ25hdHVyZSIsImJvZHkiLCJzaWduYXR1cmUiLCJzZWNyZXQiLCJwcm9jZXNzIiwiY29uc29sZSIsIndhcm4iLCJleHBlY3RlZFNpZ25hdHVyZSIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJkaWdlc3QiLCJ0aW1pbmdTYWZlRXF1YWwiLCJCdWZmZXIiLCJmcm9tIiwic2hvdWxkUHJvY2VzcyIsInBheWxvYWQiLCJhcHBfbmFtZSIsInNsYWNrUGF5bG9hZCIsImNoYW5uZWxfdHlwZSIsInRleHQiLCJpc0RNIiwiaXNNZW50aW9uIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInJlYXNvbiIsInRyaW0iLCJsZW5ndGgiLCJnbWFpbFBheWxvYWQiLCJzZW5kZXIiLCJzdWJqZWN0IiwibGFiZWxJZHMiLCJsYWJlbF9pZHMiLCJpc0F1dG9tYXRlZCIsInRvTWVzc2FnZUNvbnRleHQiLCJzbGFjayIsInNvdXJjZSIsImNvbnRlbnQiLCJ1c2VyIiwidGltZXN0YW1wIiwiRGF0ZSIsInBhcnNlRmxvYXQiLCJ0cyIsInRvSVNPU3RyaW5nIiwiY2hhbm5lbCIsImNoYW5uZWxUeXBlIiwidGhyZWFkSWQiLCJ0aHJlYWRfdHMiLCJnbWFpbCIsIm1lc3NhZ2VfdGV4dCIsInByZXZpZXciLCJzbmlwcGV0IiwibWVzc2FnZV90aW1lc3RhbXAiLCJkYXRlIiwibWVzc2FnZUlkIiwibWVzc2FnZV9pZCIsImlzUmVwbHkiLCJzdGFydHNXaXRoIiwiUE9TVCIsInJlcSIsImxvZyIsImJvZHlUZXh0IiwiaGVhZGVycyIsImdldCIsIndlYmhvb2tTZWNyZXQiLCJlbnYiLCJDT01QT1NJT19XRUJIT09LX1NFQ1JFVCIsImVycm9yIiwianNvbiIsInN0YXR1cyIsInJhd0JvZHkiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ0cmlnZ2VyVHlwZSIsInR5cGUiLCJkYXRhIiwiYXBwTmFtZSIsInNwbGl0IiwidG9VcHBlckNhc2UiLCJlbnRpdHlfaWQiLCJ1c2VyX2lkIiwiZW50aXR5SWQiLCJjb25uZWN0aW9uX2lkIiwidHJpZ2dlcl9uYW1lIiwiYXBwIiwidHJpZ2dlciIsImZpbHRlclJlc3VsdCIsInByb2Nlc3NlZCIsInJhdGVMaW1pdCIsImFsbG93ZWQiLCJyZW1haW5pbmciLCJjb250ZXh0IiwibWVzc2FnZUhhc2giLCJwcm9wb3NhbCIsInRpdGxlIiwiY29uZmlkZW5jZSIsInByb3Bvc2FsSWQiLCJ0YXNrRGV0ZWN0ZWQiLCJHRVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webhooks/composio/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/kv.ts":
/*!***********************!*\
  !*** ./app/lib/kv.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addProposal: () => (/* binding */ addProposal),\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit),\n/* harmony export */   createMessageHash: () => (/* binding */ createMessageHash),\n/* harmony export */   deleteUserSetting: () => (/* binding */ deleteUserSetting),\n/* harmony export */   getProposalCount: () => (/* binding */ getProposalCount),\n/* harmony export */   getProposals: () => (/* binding */ getProposals),\n/* harmony export */   getUserSetting: () => (/* binding */ getUserSetting),\n/* harmony export */   hasSeenMessage: () => (/* binding */ hasSeenMessage),\n/* harmony export */   markMessageSeen: () => (/* binding */ markMessageSeen),\n/* harmony export */   removeProposal: () => (/* binding */ removeProposal),\n/* harmony export */   setUserSetting: () => (/* binding */ setUserSetting)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/@upstash/redis/nodejs.mjs\");\n\n// Initialize Upstash Redis client\n// Uses REST API - works in serverless/edge environments\nconst redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n    url: process.env.UPSTASH_REDIS_REST_URL,\n    token: process.env.UPSTASH_REDIS_REST_TOKEN\n});\nconst PROPOSAL_TTL = 60 * 60 * 24 * 7; // 7 days\nconst SEEN_MESSAGE_TTL = 60 * 60; // 1 hour for deduplication\n/**\n * Add a new task proposal for a user\n */ async function addProposal(entityId, proposal) {\n    const key = `proposals:${entityId}`;\n    await redis.lpush(key, JSON.stringify(proposal));\n    await redis.expire(key, PROPOSAL_TTL);\n}\n/**\n * Get all pending proposals for a user\n */ async function getProposals(entityId, limit = 50) {\n    const key = `proposals:${entityId}`;\n    const raw = await redis.lrange(key, 0, limit - 1);\n    return raw.map((item)=>typeof item === \"string\" ? JSON.parse(item) : item);\n}\n/**\n * Remove a specific proposal by ID\n */ async function removeProposal(entityId, proposalId) {\n    const key = `proposals:${entityId}`;\n    const proposals = await getProposals(entityId);\n    const proposalToRemove = proposals.find((p)=>p.proposalId === proposalId);\n    if (!proposalToRemove) {\n        return false;\n    }\n    // Remove the specific proposal from the list\n    const removed = await redis.lrem(key, 1, JSON.stringify(proposalToRemove));\n    return removed > 0;\n}\n/**\n * Get the count of pending proposals\n */ async function getProposalCount(entityId) {\n    const key = `proposals:${entityId}`;\n    return await redis.llen(key);\n}\n/**\n * Check if a message has been seen recently (for deduplication)\n */ async function hasSeenMessage(messageHash) {\n    const key = `seen:${messageHash}`;\n    const exists = await redis.exists(key);\n    return exists > 0;\n}\n/**\n * Mark a message as seen\n */ async function markMessageSeen(messageHash) {\n    const key = `seen:${messageHash}`;\n    await redis.set(key, \"1\", {\n        ex: SEEN_MESSAGE_TTL\n    });\n}\n/**\n * Create a hash for message deduplication\n */ function createMessageHash(source, senderId, content) {\n    // Simple hash using content + sender + source\n    const str = `${source}:${senderId}:${content}`;\n    let hash = 0;\n    for(let i = 0; i < str.length; i++){\n        const char = str.charCodeAt(i);\n        hash = (hash << 5) - hash + char;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return Math.abs(hash).toString(16);\n}\n/**\n * Store user settings (like Notion database ID)\n */ async function setUserSetting(entityId, key, value) {\n    const settingKey = `settings:${entityId}:${key}`;\n    await redis.set(settingKey, value);\n}\n/**\n * Get user setting\n */ async function getUserSetting(entityId, key) {\n    const settingKey = `settings:${entityId}:${key}`;\n    return await redis.get(settingKey);\n}\n/**\n * Delete user setting\n */ async function deleteUserSetting(entityId, key) {\n    const settingKey = `settings:${entityId}:${key}`;\n    await redis.del(settingKey);\n}\n/**\n * Rate limiting: check if entity has exceeded rate limit\n */ async function checkRateLimit(entityId, maxRequests = 10, windowSeconds = 60) {\n    const key = `ratelimit:${entityId}`;\n    const current = await redis.incr(key);\n    if (current === 1) {\n        await redis.expire(key, windowSeconds);\n    }\n    const allowed = current <= maxRequests;\n    const remaining = Math.max(0, maxRequests - current);\n    return {\n        allowed,\n        remaining\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXNDb250ZW50IjpbImltcG9ydCB7IFJlZGlzIH0gZnJvbSBcIkB1cHN0YXNoL3JlZGlzXCI7XG5pbXBvcnQgdHlwZSB7IFRhc2tQcm9wb3NhbCB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8vIEluaXRpYWxpemUgVXBzdGFzaCBSZWRpcyBjbGllbnRcbi8vIFVzZXMgUkVTVCBBUEkgLSB3b3JrcyBpbiBzZXJ2ZXJsZXNzL2VkZ2UgZW52aXJvbm1lbnRzXG5jb25zdCByZWRpcyA9IG5ldyBSZWRpcyh7XG4gIHVybDogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTCEsXG4gIHRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4hLFxufSk7XG5cbmNvbnN0IFBST1BPU0FMX1RUTCA9IDYwICogNjAgKiAyNCAqIDc7IC8vIDcgZGF5c1xuY29uc3QgU0VFTl9NRVNTQUdFX1RUTCA9IDYwICogNjA7IC8vIDEgaG91ciBmb3IgZGVkdXBsaWNhdGlvblxuXG4vKipcbiAqIEFkZCBhIG5ldyB0YXNrIHByb3Bvc2FsIGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByb3Bvc2FsKFxuICBlbnRpdHlJZDogc3RyaW5nLFxuICBwcm9wb3NhbDogVGFza1Byb3Bvc2FsXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qga2V5ID0gYHByb3Bvc2Fsczoke2VudGl0eUlkfWA7XG4gIGF3YWl0IHJlZGlzLmxwdXNoKGtleSwgSlNPTi5zdHJpbmdpZnkocHJvcG9zYWwpKTtcbiAgYXdhaXQgcmVkaXMuZXhwaXJlKGtleSwgUFJPUE9TQUxfVFRMKTtcbn1cblxuLyoqXG4gKiBHZXQgYWxsIHBlbmRpbmcgcHJvcG9zYWxzIGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3Bvc2FscyhcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlciA9IDUwXG4pOiBQcm9taXNlPFRhc2tQcm9wb3NhbFtdPiB7XG4gIGNvbnN0IGtleSA9IGBwcm9wb3NhbHM6JHtlbnRpdHlJZH1gO1xuICBjb25zdCByYXcgPSBhd2FpdCByZWRpcy5scmFuZ2Uoa2V5LCAwLCBsaW1pdCAtIDEpO1xuICByZXR1cm4gcmF3Lm1hcCgoaXRlbSkgPT5cbiAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2UoaXRlbSkgOiBpdGVtXG4gICkgYXMgVGFza1Byb3Bvc2FsW107XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgc3BlY2lmaWMgcHJvcG9zYWwgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVByb3Bvc2FsKFxuICBlbnRpdHlJZDogc3RyaW5nLFxuICBwcm9wb3NhbElkOiBzdHJpbmdcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBrZXkgPSBgcHJvcG9zYWxzOiR7ZW50aXR5SWR9YDtcbiAgY29uc3QgcHJvcG9zYWxzID0gYXdhaXQgZ2V0UHJvcG9zYWxzKGVudGl0eUlkKTtcbiAgY29uc3QgcHJvcG9zYWxUb1JlbW92ZSA9IHByb3Bvc2Fscy5maW5kKChwKSA9PiBwLnByb3Bvc2FsSWQgPT09IHByb3Bvc2FsSWQpO1xuXG4gIGlmICghcHJvcG9zYWxUb1JlbW92ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgc3BlY2lmaWMgcHJvcG9zYWwgZnJvbSB0aGUgbGlzdFxuICBjb25zdCByZW1vdmVkID0gYXdhaXQgcmVkaXMubHJlbShrZXksIDEsIEpTT04uc3RyaW5naWZ5KHByb3Bvc2FsVG9SZW1vdmUpKTtcbiAgcmV0dXJuIHJlbW92ZWQgPiAwO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY291bnQgb2YgcGVuZGluZyBwcm9wb3NhbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3Bvc2FsQ291bnQoZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IGtleSA9IGBwcm9wb3NhbHM6JHtlbnRpdHlJZH1gO1xuICByZXR1cm4gYXdhaXQgcmVkaXMubGxlbihrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbWVzc2FnZSBoYXMgYmVlbiBzZWVuIHJlY2VudGx5IChmb3IgZGVkdXBsaWNhdGlvbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc1NlZW5NZXNzYWdlKG1lc3NhZ2VIYXNoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3Qga2V5ID0gYHNlZW46JHttZXNzYWdlSGFzaH1gO1xuICBjb25zdCBleGlzdHMgPSBhd2FpdCByZWRpcy5leGlzdHMoa2V5KTtcbiAgcmV0dXJuIGV4aXN0cyA+IDA7XG59XG5cbi8qKlxuICogTWFyayBhIG1lc3NhZ2UgYXMgc2VlblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya01lc3NhZ2VTZWVuKG1lc3NhZ2VIYXNoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qga2V5ID0gYHNlZW46JHttZXNzYWdlSGFzaH1gO1xuICBhd2FpdCByZWRpcy5zZXQoa2V5LCBcIjFcIiwgeyBleDogU0VFTl9NRVNTQUdFX1RUTCB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBoYXNoIGZvciBtZXNzYWdlIGRlZHVwbGljYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VIYXNoKFxuICBzb3VyY2U6IHN0cmluZyxcbiAgc2VuZGVySWQ6IHN0cmluZyxcbiAgY29udGVudDogc3RyaW5nXG4pOiBzdHJpbmcge1xuICAvLyBTaW1wbGUgaGFzaCB1c2luZyBjb250ZW50ICsgc2VuZGVyICsgc291cmNlXG4gIGNvbnN0IHN0ciA9IGAke3NvdXJjZX06JHtzZW5kZXJJZH06JHtjb250ZW50fWA7XG4gIGxldCBoYXNoID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNoYXI7XG4gICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgfVxuICByZXR1cm4gTWF0aC5hYnMoaGFzaCkudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIFN0b3JlIHVzZXIgc2V0dGluZ3MgKGxpa2UgTm90aW9uIGRhdGFiYXNlIElEKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0VXNlclNldHRpbmcoXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIGtleTogc3RyaW5nLFxuICB2YWx1ZTogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2V0dGluZ0tleSA9IGBzZXR0aW5nczoke2VudGl0eUlkfToke2tleX1gO1xuICBhd2FpdCByZWRpcy5zZXQoc2V0dGluZ0tleSwgdmFsdWUpO1xufVxuXG4vKipcbiAqIEdldCB1c2VyIHNldHRpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJTZXR0aW5nKFxuICBlbnRpdHlJZDogc3RyaW5nLFxuICBrZXk6IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIGNvbnN0IHNldHRpbmdLZXkgPSBgc2V0dGluZ3M6JHtlbnRpdHlJZH06JHtrZXl9YDtcbiAgcmV0dXJuIGF3YWl0IHJlZGlzLmdldChzZXR0aW5nS2V5KTtcbn1cblxuLyoqXG4gKiBEZWxldGUgdXNlciBzZXR0aW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyU2V0dGluZyhcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAga2V5OiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzZXR0aW5nS2V5ID0gYHNldHRpbmdzOiR7ZW50aXR5SWR9OiR7a2V5fWA7XG4gIGF3YWl0IHJlZGlzLmRlbChzZXR0aW5nS2V5KTtcbn1cblxuLyoqXG4gKiBSYXRlIGxpbWl0aW5nOiBjaGVjayBpZiBlbnRpdHkgaGFzIGV4Y2VlZGVkIHJhdGUgbGltaXRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrUmF0ZUxpbWl0KFxuICBlbnRpdHlJZDogc3RyaW5nLFxuICBtYXhSZXF1ZXN0czogbnVtYmVyID0gMTAsXG4gIHdpbmRvd1NlY29uZHM6IG51bWJlciA9IDYwXG4pOiBQcm9taXNlPHsgYWxsb3dlZDogYm9vbGVhbjsgcmVtYWluaW5nOiBudW1iZXIgfT4ge1xuICBjb25zdCBrZXkgPSBgcmF0ZWxpbWl0OiR7ZW50aXR5SWR9YDtcbiAgY29uc3QgY3VycmVudCA9IGF3YWl0IHJlZGlzLmluY3Ioa2V5KTtcblxuICBpZiAoY3VycmVudCA9PT0gMSkge1xuICAgIGF3YWl0IHJlZGlzLmV4cGlyZShrZXksIHdpbmRvd1NlY29uZHMpO1xuICB9XG5cbiAgY29uc3QgYWxsb3dlZCA9IGN1cnJlbnQgPD0gbWF4UmVxdWVzdHM7XG4gIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIG1heFJlcXVlc3RzIC0gY3VycmVudCk7XG5cbiAgcmV0dXJuIHsgYWxsb3dlZCwgcmVtYWluaW5nIH07XG59XG4iXSwibmFtZXMiOlsiUmVkaXMiLCJyZWRpcyIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJVUFNUQVNIX1JFRElTX1JFU1RfVVJMIiwidG9rZW4iLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJQUk9QT1NBTF9UVEwiLCJTRUVOX01FU1NBR0VfVFRMIiwiYWRkUHJvcG9zYWwiLCJlbnRpdHlJZCIsInByb3Bvc2FsIiwia2V5IiwibHB1c2giLCJKU09OIiwic3RyaW5naWZ5IiwiZXhwaXJlIiwiZ2V0UHJvcG9zYWxzIiwibGltaXQiLCJyYXciLCJscmFuZ2UiLCJtYXAiLCJpdGVtIiwicGFyc2UiLCJyZW1vdmVQcm9wb3NhbCIsInByb3Bvc2FsSWQiLCJwcm9wb3NhbHMiLCJwcm9wb3NhbFRvUmVtb3ZlIiwiZmluZCIsInAiLCJyZW1vdmVkIiwibHJlbSIsImdldFByb3Bvc2FsQ291bnQiLCJsbGVuIiwiaGFzU2Vlbk1lc3NhZ2UiLCJtZXNzYWdlSGFzaCIsImV4aXN0cyIsIm1hcmtNZXNzYWdlU2VlbiIsInNldCIsImV4IiwiY3JlYXRlTWVzc2FnZUhhc2giLCJzb3VyY2UiLCJzZW5kZXJJZCIsImNvbnRlbnQiLCJzdHIiLCJoYXNoIiwiaSIsImxlbmd0aCIsImNoYXIiLCJjaGFyQ29kZUF0IiwiTWF0aCIsImFicyIsInRvU3RyaW5nIiwic2V0VXNlclNldHRpbmciLCJ2YWx1ZSIsInNldHRpbmdLZXkiLCJnZXRVc2VyU2V0dGluZyIsImdldCIsImRlbGV0ZVVzZXJTZXR0aW5nIiwiZGVsIiwiY2hlY2tSYXRlTGltaXQiLCJtYXhSZXF1ZXN0cyIsIndpbmRvd1NlY29uZHMiLCJjdXJyZW50IiwiaW5jciIsImFsbG93ZWQiLCJyZW1haW5pbmciLCJtYXgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/kv.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/taskInference.ts":
/*!**********************************!*\
  !*** ./app/lib/taskInference.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   classifyMessage: () => (/* binding */ classifyMessage),\n/* harmony export */   extractTaskDetails: () => (/* binding */ extractTaskDetails),\n/* harmony export */   inferTaskFromMessage: () => (/* binding */ inferTaskFromMessage)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_google__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ai-sdk/google */ \"(rsc)/./node_modules/@ai-sdk/google/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\nconst googleAI = (0,_ai_sdk_google__WEBPACK_IMPORTED_MODULE_0__.createGoogleGenerativeAI)({\n    apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY\n});\n// Schema for the AI's structured task extraction output\nconst TaskExtractionSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    isTask: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().describe(\"Whether this message contains an actionable task\"),\n    confidence: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(0).max(1).describe(\"Confidence score 0-1\"),\n    task: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        title: zod__WEBPACK_IMPORTED_MODULE_1__.string().describe(\"Concise task title (max 80 chars)\"),\n        description: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional().describe(\"Additional context or details\"),\n        dueDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional().describe(\"ISO 8601 date if deadline mentioned\"),\n        priority: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            \"low\",\n            \"medium\",\n            \"high\"\n        ]).describe(\"Inferred priority level\"),\n        reasoning: zod__WEBPACK_IMPORTED_MODULE_1__.string().describe(\"Why this was identified as a task\")\n    }).optional()\n});\n/**\n * Stage 1: Quick spam/chat classification\n * Returns \"task\" or \"chat\" - cheap and fast\n */ async function classifyMessage(content) {\n    const prompt = `You are classifying messages. Respond with exactly one word: either \"task\" or \"chat\".\n\nTASK - message contains:\n- Deadlines (by today, by Friday, EOD, ASAP, due)\n- Action requests (complete, finish, do, submit, send, review)\n- Assignments or todos\n- Something that needs to be done\n\nCHAT - message contains:\n- Greetings, social chat\n- Already completed items\n- Pure information with no action needed\n\nMessage to classify:\n\"${content.slice(0, 500)}\"\n\nClassification (task or chat):`;\n    try {\n        console.log(\"[TaskInference] Calling classification model with content:\", content.slice(0, 100));\n        const result = await (0,ai__WEBPACK_IMPORTED_MODULE_2__.generateText)({\n            model: googleAI(\"gemini-2.5-flash-lite\"),\n            prompt,\n            maxTokens: 50\n        });\n        const rawResult = result.text?.trim().toLowerCase() || \"\";\n        console.log(\"[TaskInference] Classification raw response:\", JSON.stringify(result.text));\n        // If empty response, default to task to let extraction decide\n        if (!rawResult) {\n            console.log(\"[TaskInference] Empty response from model, defaulting to task\");\n            return \"task\";\n        }\n        // Extract just \"task\" or \"chat\" from the response\n        const classification = rawResult.includes(\"task\") ? \"task\" : \"chat\";\n        console.log(\"[TaskInference] Classification result:\", classification);\n        return classification;\n    } catch (error) {\n        console.error(\"[TaskInference] Classification error:\", error);\n        // On error, default to \"task\" to allow extraction to make the final call\n        return \"task\";\n    }\n}\n/**\n * Stage 2: Full task extraction with structured output\n * Only called if Stage 1 returns \"task\"\n */ async function extractTaskDetails(context, currentDate = new Date()) {\n    const formattedDate = currentDate.toLocaleDateString(\"en-US\", {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n    });\n    const systemPrompt = `You are a task detection AI. Analyze messages to identify actionable tasks, to-dos, and deadlines.\n\nCURRENT DATE: ${formattedDate}\n\nTASK INDICATORS (high confidence 0.8-1.0):\n- Direct requests: \"please do\", \"can you\", \"need you to\", \"make sure to\"\n- Action items: \"TODO\", \"action item\", \"follow up\", \"don't forget\"\n- Deadlines: \"by Friday\", \"due tomorrow\", \"ASAP\", \"urgent\", \"EOD\", \"end of week\"\n- Assignments: mentions of the user, \"assigned to you\", \"your responsibility\"\n- Commitments: \"I'll handle\", \"I will\", \"let me take care of\"\n\nTASK INDICATORS (medium confidence 0.5-0.8):\n- Questions implying action: \"Can we schedule?\", \"Would you be able to?\"\n- Suggestions: \"We should\", \"It would be good to\"\n- Meeting follow-ups: \"As discussed\", \"Per our conversation\"\n\nLOW CONFIDENCE (0.3-0.5):\n- Vague requests without clear action\n- Information that might need follow-up\n\nNOT TASKS (confidence < 0.3):\n- Pure informational messages\n- Social chat, greetings\n- Already completed items (\"I finished\", \"Done\")\n- Questions seeking information only\n- Automated notifications without action needed\n\nPRIORITY RULES:\n- HIGH: Contains \"urgent\", \"ASAP\", \"critical\", \"blocking\", deadline within 24h\n- MEDIUM: Has a deadline within 1 week, or explicit request\n- LOW: No deadline, nice-to-have, suggestions\n\nWhen extracting deadlines, convert relative dates to ISO 8601 format based on the current date.\nKeep task titles concise (under 80 characters) and actionable.`;\n    const sourceInfo = context.source === \"slack\" ? `CHANNEL: ${context.channel || \"DM\"}` : `SUBJECT: ${context.subject || \"(no subject)\"}`;\n    const userPrompt = `Analyze this ${context.source === \"slack\" ? \"Slack message\" : \"email\"} for potential tasks:\n\nSOURCE: ${context.source.toUpperCase()}\n${sourceInfo}\nFROM: ${context.sender}\nTIME: ${context.timestamp}\n\nCONTENT:\n${context.content}\n\nDetermine if this contains an actionable task for the recipient. If yes, extract the task details.`;\n    try {\n        const result = await (0,ai__WEBPACK_IMPORTED_MODULE_2__.generateObject)({\n            model: googleAI(\"gemini-2.5-flash-lite\"),\n            schema: TaskExtractionSchema,\n            system: systemPrompt,\n            prompt: userPrompt\n        });\n        return result.object;\n    } catch (error) {\n        console.error(\"[TaskInference] Extraction error:\", error);\n        return {\n            isTask: false,\n            confidence: 0\n        };\n    }\n}\n/**\n * Full two-stage inference pipeline\n * Returns a TaskProposal if a task is detected with sufficient confidence\n */ async function inferTaskFromMessage(context, confidenceThreshold = 0.6) {\n    // Stage 1: Quick classification\n    const classification = await classifyMessage(context.content);\n    if (classification === \"chat\") {\n        console.log(\"[TaskInference] Message classified as chat, skipping extraction\");\n        return null;\n    }\n    // Stage 2: Full extraction\n    const extraction = await extractTaskDetails(context);\n    if (!extraction.isTask || extraction.confidence < confidenceThreshold) {\n        console.log(`[TaskInference] Task not detected or low confidence: ${extraction.confidence}`);\n        return null;\n    }\n    if (!extraction.task) {\n        console.log(\"[TaskInference] No task details extracted\");\n        return null;\n    }\n    // Build the proposal\n    const proposal = {\n        proposalId: crypto.randomUUID().slice(0, 8),\n        type: \"task_proposal\",\n        title: extraction.task.title,\n        description: extraction.task.description,\n        dueDate: extraction.task.dueDate,\n        priority: extraction.task.priority,\n        source: context.source,\n        sourceContext: {\n            channel: context.channel,\n            subject: context.subject,\n            sender: context.sender,\n            timestamp: context.timestamp,\n            originalContent: context.content.slice(0, 1000),\n            messageId: context.messageId,\n            threadId: context.threadId\n        },\n        confidence: extraction.confidence,\n        reasoning: extraction.task.reasoning,\n        createdAt: new Date().toISOString()\n    };\n    return proposal;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVdsRCxJQUFJLENBQUNNLFFBQVE7UUFDbENpQyxRQUFRWCxRQUFRVyxNQUFNO1FBQ3RCaUIsZUFBZTtZQUNiaEIsU0FBU1osUUFBUVksT0FBTztZQUN4QkMsU0FBU2IsUUFBUWEsT0FBTztZQUN4QkcsUUFBUWhCLFFBQVFnQixNQUFNO1lBQ3RCQyxXQUFXakIsUUFBUWlCLFNBQVM7WUFDNUJZLGlCQUFpQjdCLFFBQVFsQixPQUFPLENBQUNFLEtBQUssQ0FBQyxHQUFHO1lBQzFDOEMsV0FBVzlCLFFBQVE4QixTQUFTO1lBQzVCQyxVQUFVL0IsUUFBUStCLFFBQVE7UUFDNUI7UUFDQS9ELFlBQVlzRCxXQUFXdEQsVUFBVTtRQUNqQ1ksV0FBVzBDLFdBQVdsRCxJQUFJLENBQUNRLFNBQVM7UUFDcENvRCxXQUFXLElBQUk5QixPQUFPK0IsV0FBVztJQUNuQztJQUVBLE9BQU9WO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmJpdGFsLWFpLWFnZW50Ly4vYXBwL2xpYi90YXNrSW5mZXJlbmNlLnRzP2M5OTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSBcIkBhaS1zZGsvZ29vZ2xlXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZU9iamVjdCwgZ2VuZXJhdGVUZXh0IH0gZnJvbSBcImFpXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHR5cGUgeyBUYXNrUHJvcG9zYWwgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5cbmNvbnN0IGdvb2dsZUFJID0gY3JlYXRlR29vZ2xlR2VuZXJhdGl2ZUFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5HT09HTEVfR0VORVJBVElWRV9BSV9BUElfS0VZISxcbn0pO1xuXG4vLyBTY2hlbWEgZm9yIHRoZSBBSSdzIHN0cnVjdHVyZWQgdGFzayBleHRyYWN0aW9uIG91dHB1dFxuY29uc3QgVGFza0V4dHJhY3Rpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlzVGFzazogei5ib29sZWFuKCkuZGVzY3JpYmUoXCJXaGV0aGVyIHRoaXMgbWVzc2FnZSBjb250YWlucyBhbiBhY3Rpb25hYmxlIHRhc2tcIiksXG4gIGNvbmZpZGVuY2U6IHoubnVtYmVyKCkubWluKDApLm1heCgxKS5kZXNjcmliZShcIkNvbmZpZGVuY2Ugc2NvcmUgMC0xXCIpLFxuICB0YXNrOiB6XG4gICAgLm9iamVjdCh7XG4gICAgICB0aXRsZTogei5zdHJpbmcoKS5kZXNjcmliZShcIkNvbmNpc2UgdGFzayB0aXRsZSAobWF4IDgwIGNoYXJzKVwiKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJBZGRpdGlvbmFsIGNvbnRleHQgb3IgZGV0YWlsc1wiKSxcbiAgICAgIGR1ZURhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5kZXNjcmliZShcIklTTyA4NjAxIGRhdGUgaWYgZGVhZGxpbmUgbWVudGlvbmVkXCIpLFxuICAgICAgcHJpb3JpdHk6IHouZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5kZXNjcmliZShcIkluZmVycmVkIHByaW9yaXR5IGxldmVsXCIpLFxuICAgICAgcmVhc29uaW5nOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiV2h5IHRoaXMgd2FzIGlkZW50aWZpZWQgYXMgYSB0YXNrXCIpLFxuICAgIH0pXG4gICAgLm9wdGlvbmFsKCksXG59KTtcblxuZXhwb3J0IHR5cGUgVGFza0V4dHJhY3Rpb24gPSB6LmluZmVyPHR5cGVvZiBUYXNrRXh0cmFjdGlvblNjaGVtYT47XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNvbnRleHQge1xuICBzb3VyY2U6IFwic2xhY2tcIiB8IFwiZ21haWxcIjtcbiAgY29udGVudDogc3RyaW5nO1xuICBzZW5kZXI6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIC8vIFNsYWNrLXNwZWNpZmljXG4gIGNoYW5uZWw/OiBzdHJpbmc7XG4gIGNoYW5uZWxUeXBlPzogXCJjaGFubmVsXCIgfCBcImdyb3VwXCIgfCBcImltXCIgfCBcIm1waW1cIjtcbiAgdGhyZWFkSWQ/OiBzdHJpbmc7XG4gIC8vIEdtYWlsLXNwZWNpZmljXG4gIHN1YmplY3Q/OiBzdHJpbmc7XG4gIG1lc3NhZ2VJZD86IHN0cmluZztcbiAgaXNSZXBseT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogU3RhZ2UgMTogUXVpY2sgc3BhbS9jaGF0IGNsYXNzaWZpY2F0aW9uXG4gKiBSZXR1cm5zIFwidGFza1wiIG9yIFwiY2hhdFwiIC0gY2hlYXAgYW5kIGZhc3RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsYXNzaWZ5TWVzc2FnZShjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPFwidGFza1wiIHwgXCJjaGF0XCI+IHtcbiAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgY2xhc3NpZnlpbmcgbWVzc2FnZXMuIFJlc3BvbmQgd2l0aCBleGFjdGx5IG9uZSB3b3JkOiBlaXRoZXIgXCJ0YXNrXCIgb3IgXCJjaGF0XCIuXG5cblRBU0sgLSBtZXNzYWdlIGNvbnRhaW5zOlxuLSBEZWFkbGluZXMgKGJ5IHRvZGF5LCBieSBGcmlkYXksIEVPRCwgQVNBUCwgZHVlKVxuLSBBY3Rpb24gcmVxdWVzdHMgKGNvbXBsZXRlLCBmaW5pc2gsIGRvLCBzdWJtaXQsIHNlbmQsIHJldmlldylcbi0gQXNzaWdubWVudHMgb3IgdG9kb3Ncbi0gU29tZXRoaW5nIHRoYXQgbmVlZHMgdG8gYmUgZG9uZVxuXG5DSEFUIC0gbWVzc2FnZSBjb250YWluczpcbi0gR3JlZXRpbmdzLCBzb2NpYWwgY2hhdFxuLSBBbHJlYWR5IGNvbXBsZXRlZCBpdGVtc1xuLSBQdXJlIGluZm9ybWF0aW9uIHdpdGggbm8gYWN0aW9uIG5lZWRlZFxuXG5NZXNzYWdlIHRvIGNsYXNzaWZ5OlxuXCIke2NvbnRlbnQuc2xpY2UoMCwgNTAwKX1cIlxuXG5DbGFzc2lmaWNhdGlvbiAodGFzayBvciBjaGF0KTpgO1xuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJbVGFza0luZmVyZW5jZV0gQ2FsbGluZyBjbGFzc2lmaWNhdGlvbiBtb2RlbCB3aXRoIGNvbnRlbnQ6XCIsIGNvbnRlbnQuc2xpY2UoMCwgMTAwKSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuZXJhdGVUZXh0KHtcbiAgICAgIG1vZGVsOiBnb29nbGVBSShcImdlbWluaS0yLjUtZmxhc2gtbGl0ZVwiKSxcbiAgICAgIHByb21wdCxcbiAgICAgIG1heFRva2VuczogNTAsXG4gICAgfSk7XG5cbiAgICBjb25zdCByYXdSZXN1bHQgPSByZXN1bHQudGV4dD8udHJpbSgpLnRvTG93ZXJDYXNlKCkgfHwgXCJcIjtcbiAgICBjb25zb2xlLmxvZyhcIltUYXNrSW5mZXJlbmNlXSBDbGFzc2lmaWNhdGlvbiByYXcgcmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdC50ZXh0KSk7XG4gICAgXG4gICAgLy8gSWYgZW1wdHkgcmVzcG9uc2UsIGRlZmF1bHQgdG8gdGFzayB0byBsZXQgZXh0cmFjdGlvbiBkZWNpZGVcbiAgICBpZiAoIXJhd1Jlc3VsdCkge1xuICAgICAgY29uc29sZS5sb2coXCJbVGFza0luZmVyZW5jZV0gRW1wdHkgcmVzcG9uc2UgZnJvbSBtb2RlbCwgZGVmYXVsdGluZyB0byB0YXNrXCIpO1xuICAgICAgcmV0dXJuIFwidGFza1wiO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IGp1c3QgXCJ0YXNrXCIgb3IgXCJjaGF0XCIgZnJvbSB0aGUgcmVzcG9uc2VcbiAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IHJhd1Jlc3VsdC5pbmNsdWRlcyhcInRhc2tcIikgPyBcInRhc2tcIiA6IFwiY2hhdFwiO1xuICAgIGNvbnNvbGUubG9nKFwiW1Rhc2tJbmZlcmVuY2VdIENsYXNzaWZpY2F0aW9uIHJlc3VsdDpcIiwgY2xhc3NpZmljYXRpb24pO1xuICAgIHJldHVybiBjbGFzc2lmaWNhdGlvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW1Rhc2tJbmZlcmVuY2VdIENsYXNzaWZpY2F0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgLy8gT24gZXJyb3IsIGRlZmF1bHQgdG8gXCJ0YXNrXCIgdG8gYWxsb3cgZXh0cmFjdGlvbiB0byBtYWtlIHRoZSBmaW5hbCBjYWxsXG4gICAgcmV0dXJuIFwidGFza1wiO1xuICB9XG59XG5cbi8qKlxuICogU3RhZ2UgMjogRnVsbCB0YXNrIGV4dHJhY3Rpb24gd2l0aCBzdHJ1Y3R1cmVkIG91dHB1dFxuICogT25seSBjYWxsZWQgaWYgU3RhZ2UgMSByZXR1cm5zIFwidGFza1wiXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0VGFza0RldGFpbHMoXG4gIGNvbnRleHQ6IE1lc3NhZ2VDb250ZXh0LFxuICBjdXJyZW50RGF0ZTogRGF0ZSA9IG5ldyBEYXRlKClcbik6IFByb21pc2U8VGFza0V4dHJhY3Rpb24+IHtcbiAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGN1cnJlbnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIsIHtcbiAgICB3ZWVrZGF5OiBcImxvbmdcIixcbiAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICBtb250aDogXCJsb25nXCIsXG4gICAgZGF5OiBcIm51bWVyaWNcIixcbiAgfSk7XG5cbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFlvdSBhcmUgYSB0YXNrIGRldGVjdGlvbiBBSS4gQW5hbHl6ZSBtZXNzYWdlcyB0byBpZGVudGlmeSBhY3Rpb25hYmxlIHRhc2tzLCB0by1kb3MsIGFuZCBkZWFkbGluZXMuXG5cbkNVUlJFTlQgREFURTogJHtmb3JtYXR0ZWREYXRlfVxuXG5UQVNLIElORElDQVRPUlMgKGhpZ2ggY29uZmlkZW5jZSAwLjgtMS4wKTpcbi0gRGlyZWN0IHJlcXVlc3RzOiBcInBsZWFzZSBkb1wiLCBcImNhbiB5b3VcIiwgXCJuZWVkIHlvdSB0b1wiLCBcIm1ha2Ugc3VyZSB0b1wiXG4tIEFjdGlvbiBpdGVtczogXCJUT0RPXCIsIFwiYWN0aW9uIGl0ZW1cIiwgXCJmb2xsb3cgdXBcIiwgXCJkb24ndCBmb3JnZXRcIlxuLSBEZWFkbGluZXM6IFwiYnkgRnJpZGF5XCIsIFwiZHVlIHRvbW9ycm93XCIsIFwiQVNBUFwiLCBcInVyZ2VudFwiLCBcIkVPRFwiLCBcImVuZCBvZiB3ZWVrXCJcbi0gQXNzaWdubWVudHM6IG1lbnRpb25zIG9mIHRoZSB1c2VyLCBcImFzc2lnbmVkIHRvIHlvdVwiLCBcInlvdXIgcmVzcG9uc2liaWxpdHlcIlxuLSBDb21taXRtZW50czogXCJJJ2xsIGhhbmRsZVwiLCBcIkkgd2lsbFwiLCBcImxldCBtZSB0YWtlIGNhcmUgb2ZcIlxuXG5UQVNLIElORElDQVRPUlMgKG1lZGl1bSBjb25maWRlbmNlIDAuNS0wLjgpOlxuLSBRdWVzdGlvbnMgaW1wbHlpbmcgYWN0aW9uOiBcIkNhbiB3ZSBzY2hlZHVsZT9cIiwgXCJXb3VsZCB5b3UgYmUgYWJsZSB0bz9cIlxuLSBTdWdnZXN0aW9uczogXCJXZSBzaG91bGRcIiwgXCJJdCB3b3VsZCBiZSBnb29kIHRvXCJcbi0gTWVldGluZyBmb2xsb3ctdXBzOiBcIkFzIGRpc2N1c3NlZFwiLCBcIlBlciBvdXIgY29udmVyc2F0aW9uXCJcblxuTE9XIENPTkZJREVOQ0UgKDAuMy0wLjUpOlxuLSBWYWd1ZSByZXF1ZXN0cyB3aXRob3V0IGNsZWFyIGFjdGlvblxuLSBJbmZvcm1hdGlvbiB0aGF0IG1pZ2h0IG5lZWQgZm9sbG93LXVwXG5cbk5PVCBUQVNLUyAoY29uZmlkZW5jZSA8IDAuMyk6XG4tIFB1cmUgaW5mb3JtYXRpb25hbCBtZXNzYWdlc1xuLSBTb2NpYWwgY2hhdCwgZ3JlZXRpbmdzXG4tIEFscmVhZHkgY29tcGxldGVkIGl0ZW1zIChcIkkgZmluaXNoZWRcIiwgXCJEb25lXCIpXG4tIFF1ZXN0aW9ucyBzZWVraW5nIGluZm9ybWF0aW9uIG9ubHlcbi0gQXV0b21hdGVkIG5vdGlmaWNhdGlvbnMgd2l0aG91dCBhY3Rpb24gbmVlZGVkXG5cblBSSU9SSVRZIFJVTEVTOlxuLSBISUdIOiBDb250YWlucyBcInVyZ2VudFwiLCBcIkFTQVBcIiwgXCJjcml0aWNhbFwiLCBcImJsb2NraW5nXCIsIGRlYWRsaW5lIHdpdGhpbiAyNGhcbi0gTUVESVVNOiBIYXMgYSBkZWFkbGluZSB3aXRoaW4gMSB3ZWVrLCBvciBleHBsaWNpdCByZXF1ZXN0XG4tIExPVzogTm8gZGVhZGxpbmUsIG5pY2UtdG8taGF2ZSwgc3VnZ2VzdGlvbnNcblxuV2hlbiBleHRyYWN0aW5nIGRlYWRsaW5lcywgY29udmVydCByZWxhdGl2ZSBkYXRlcyB0byBJU08gODYwMSBmb3JtYXQgYmFzZWQgb24gdGhlIGN1cnJlbnQgZGF0ZS5cbktlZXAgdGFzayB0aXRsZXMgY29uY2lzZSAodW5kZXIgODAgY2hhcmFjdGVycykgYW5kIGFjdGlvbmFibGUuYDtcblxuICBjb25zdCBzb3VyY2VJbmZvID1cbiAgICBjb250ZXh0LnNvdXJjZSA9PT0gXCJzbGFja1wiXG4gICAgICA/IGBDSEFOTkVMOiAke2NvbnRleHQuY2hhbm5lbCB8fCBcIkRNXCJ9YFxuICAgICAgOiBgU1VCSkVDVDogJHtjb250ZXh0LnN1YmplY3QgfHwgXCIobm8gc3ViamVjdClcIn1gO1xuXG4gIGNvbnN0IHVzZXJQcm9tcHQgPSBgQW5hbHl6ZSB0aGlzICR7Y29udGV4dC5zb3VyY2UgPT09IFwic2xhY2tcIiA/IFwiU2xhY2sgbWVzc2FnZVwiIDogXCJlbWFpbFwifSBmb3IgcG90ZW50aWFsIHRhc2tzOlxuXG5TT1VSQ0U6ICR7Y29udGV4dC5zb3VyY2UudG9VcHBlckNhc2UoKX1cbiR7c291cmNlSW5mb31cbkZST006ICR7Y29udGV4dC5zZW5kZXJ9XG5USU1FOiAke2NvbnRleHQudGltZXN0YW1wfVxuXG5DT05URU5UOlxuJHtjb250ZXh0LmNvbnRlbnR9XG5cbkRldGVybWluZSBpZiB0aGlzIGNvbnRhaW5zIGFuIGFjdGlvbmFibGUgdGFzayBmb3IgdGhlIHJlY2lwaWVudC4gSWYgeWVzLCBleHRyYWN0IHRoZSB0YXNrIGRldGFpbHMuYDtcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlT2JqZWN0KHtcbiAgICAgIG1vZGVsOiBnb29nbGVBSShcImdlbWluaS0yLjUtZmxhc2gtbGl0ZVwiKSxcbiAgICAgIHNjaGVtYTogVGFza0V4dHJhY3Rpb25TY2hlbWEsXG4gICAgICBzeXN0ZW06IHN5c3RlbVByb21wdCxcbiAgICAgIHByb21wdDogdXNlclByb21wdCxcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQub2JqZWN0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbVGFza0luZmVyZW5jZV0gRXh0cmFjdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBpc1Rhc2s6IGZhbHNlLFxuICAgICAgY29uZmlkZW5jZTogMCxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRnVsbCB0d28tc3RhZ2UgaW5mZXJlbmNlIHBpcGVsaW5lXG4gKiBSZXR1cm5zIGEgVGFza1Byb3Bvc2FsIGlmIGEgdGFzayBpcyBkZXRlY3RlZCB3aXRoIHN1ZmZpY2llbnQgY29uZmlkZW5jZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5mZXJUYXNrRnJvbU1lc3NhZ2UoXG4gIGNvbnRleHQ6IE1lc3NhZ2VDb250ZXh0LFxuICBjb25maWRlbmNlVGhyZXNob2xkOiBudW1iZXIgPSAwLjZcbik6IFByb21pc2U8VGFza1Byb3Bvc2FsIHwgbnVsbD4ge1xuICAvLyBTdGFnZSAxOiBRdWljayBjbGFzc2lmaWNhdGlvblxuICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZ5TWVzc2FnZShjb250ZXh0LmNvbnRlbnQpO1xuXG4gIGlmIChjbGFzc2lmaWNhdGlvbiA9PT0gXCJjaGF0XCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIltUYXNrSW5mZXJlbmNlXSBNZXNzYWdlIGNsYXNzaWZpZWQgYXMgY2hhdCwgc2tpcHBpbmcgZXh0cmFjdGlvblwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFN0YWdlIDI6IEZ1bGwgZXh0cmFjdGlvblxuICBjb25zdCBleHRyYWN0aW9uID0gYXdhaXQgZXh0cmFjdFRhc2tEZXRhaWxzKGNvbnRleHQpO1xuXG4gIGlmICghZXh0cmFjdGlvbi5pc1Rhc2sgfHwgZXh0cmFjdGlvbi5jb25maWRlbmNlIDwgY29uZmlkZW5jZVRocmVzaG9sZCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFtUYXNrSW5mZXJlbmNlXSBUYXNrIG5vdCBkZXRlY3RlZCBvciBsb3cgY29uZmlkZW5jZTogJHtleHRyYWN0aW9uLmNvbmZpZGVuY2V9YFxuICAgICk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIWV4dHJhY3Rpb24udGFzaykge1xuICAgIGNvbnNvbGUubG9nKFwiW1Rhc2tJbmZlcmVuY2VdIE5vIHRhc2sgZGV0YWlscyBleHRyYWN0ZWRcIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBCdWlsZCB0aGUgcHJvcG9zYWxcbiAgY29uc3QgcHJvcG9zYWw6IFRhc2tQcm9wb3NhbCA9IHtcbiAgICBwcm9wb3NhbElkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLnNsaWNlKDAsIDgpLFxuICAgIHR5cGU6IFwidGFza19wcm9wb3NhbFwiLFxuICAgIHRpdGxlOiBleHRyYWN0aW9uLnRhc2sudGl0bGUsXG4gICAgZGVzY3JpcHRpb246IGV4dHJhY3Rpb24udGFzay5kZXNjcmlwdGlvbixcbiAgICBkdWVEYXRlOiBleHRyYWN0aW9uLnRhc2suZHVlRGF0ZSxcbiAgICBwcmlvcml0eTogZXh0cmFjdGlvbi50YXNrLnByaW9yaXR5LFxuICAgIHNvdXJjZTogY29udGV4dC5zb3VyY2UsXG4gICAgc291cmNlQ29udGV4dDoge1xuICAgICAgY2hhbm5lbDogY29udGV4dC5jaGFubmVsLFxuICAgICAgc3ViamVjdDogY29udGV4dC5zdWJqZWN0LFxuICAgICAgc2VuZGVyOiBjb250ZXh0LnNlbmRlcixcbiAgICAgIHRpbWVzdGFtcDogY29udGV4dC50aW1lc3RhbXAsXG4gICAgICBvcmlnaW5hbENvbnRlbnQ6IGNvbnRleHQuY29udGVudC5zbGljZSgwLCAxMDAwKSwgLy8gTGltaXQgc3RvcmVkIGNvbnRlbnRcbiAgICAgIG1lc3NhZ2VJZDogY29udGV4dC5tZXNzYWdlSWQsXG4gICAgICB0aHJlYWRJZDogY29udGV4dC50aHJlYWRJZCxcbiAgICB9LFxuICAgIGNvbmZpZGVuY2U6IGV4dHJhY3Rpb24uY29uZmlkZW5jZSxcbiAgICByZWFzb25pbmc6IGV4dHJhY3Rpb24udGFzay5yZWFzb25pbmcsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG5cbiAgcmV0dXJuIHByb3Bvc2FsO1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUdvb2dsZUdlbmVyYXRpdmVBSSIsImdlbmVyYXRlT2JqZWN0IiwiZ2VuZXJhdGVUZXh0IiwieiIsImdvb2dsZUFJIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9HRU5FUkFUSVZFX0FJX0FQSV9LRVkiLCJUYXNrRXh0cmFjdGlvblNjaGVtYSIsIm9iamVjdCIsImlzVGFzayIsImJvb2xlYW4iLCJkZXNjcmliZSIsImNvbmZpZGVuY2UiLCJudW1iZXIiLCJtaW4iLCJtYXgiLCJ0YXNrIiwidGl0bGUiLCJzdHJpbmciLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiZW51bSIsInJlYXNvbmluZyIsImNsYXNzaWZ5TWVzc2FnZSIsImNvbnRlbnQiLCJwcm9tcHQiLCJzbGljZSIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJtb2RlbCIsIm1heFRva2VucyIsInJhd1Jlc3VsdCIsInRleHQiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xhc3NpZmljYXRpb24iLCJpbmNsdWRlcyIsImVycm9yIiwiZXh0cmFjdFRhc2tEZXRhaWxzIiwiY29udGV4dCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImZvcm1hdHRlZERhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3lzdGVtUHJvbXB0Iiwic291cmNlSW5mbyIsInNvdXJjZSIsImNoYW5uZWwiLCJzdWJqZWN0IiwidXNlclByb21wdCIsInRvVXBwZXJDYXNlIiwic2VuZGVyIiwidGltZXN0YW1wIiwic2NoZW1hIiwic3lzdGVtIiwiaW5mZXJUYXNrRnJvbU1lc3NhZ2UiLCJjb25maWRlbmNlVGhyZXNob2xkIiwiZXh0cmFjdGlvbiIsInByb3Bvc2FsIiwicHJvcG9zYWxJZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJ0eXBlIiwic291cmNlQ29udGV4dCIsIm9yaWdpbmFsQ29udGVudCIsIm1lc3NhZ2VJZCIsInRocmVhZElkIiwiY3JlYXRlZEF0IiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/taskInference.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/@opentelemetry","vendor-chunks/uncrypto","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/@ai-sdk","vendor-chunks/zod-to-json-schema","vendor-chunks/secure-json-parse","vendor-chunks/nanoid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fcomposio%2Froute&page=%2Fapi%2Fwebhooks%2Fcomposio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fcomposio%2Froute.ts&appDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdarrenz%2FDocuments%2FMiscProjects%2FAI%20Agent%20Test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();